<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cove Bespoke</title>
  <link rel="stylesheet" href="style/variables.css">
  <link rel="stylesheet" href="style/base.css">
  <link rel="stylesheet" href="style/layout.css">
  <link rel="stylesheet" href="style/sections.css">
  <link rel="stylesheet" href="style/components.css">
  <link rel="stylesheet" href="style/buttons.css">
  <link rel="stylesheet" href="style/forms.css">
  <link rel="stylesheet" href="style/animations.css">
  <link rel="stylesheet" href="sections/hero/style.css">
  <link rel="stylesheet" href="sections/statement/style.css">
  <link rel="stylesheet" href="sections/signature-carousel/style.css">
</head>
<body>
  <div id="header-placeholder"></div>
  <section class="hero-section">
    <img class="hero-bg" src="images/index-hero.png" alt="" />
    <div class="hero-content">
      <h1>Bespoke Kitchens & Interiors, Crafted for Life.</h1>
      <p>Discover a seamless journey to a space that is uniquely yours.</p>
      <a href="/contact.html" class="btn btn--primary">Begin Your Journey</a>
    </div>
  </section>
  <section class="crafted-statement" id="crafted-for-life">
    <div class="statement-inner container">
      <h2>Crafted&nbsp;for&nbsp;Life</h2>
      <p>Every Cove Bespoke kitchen and interior is made to stand the test of time, blending timeless design with meticulous craftsmanship.</p>
      <a href="/portfolio.html" class="btn btn--primary">Explore&nbsp;Our&nbsp;Projects</a>
    </div>
  </section>
  <section class="signature-carousel" id="signature-collection">
    <div class="carousel-inner">
      <h2>Signature Collection</h2>
      <div class="carousel-track" data-js="signature-track">
        <article class="carousel-slide">
          <img src="images/index-hero.png" alt="Modern Coastal Retreat" />
          <div class="slide-text">
            <h3>Modern Coastal Retreat</h3>
            <p>Sleek lines and serene sea hues.</p>
          </div>
        </article>
        <article class="carousel-slide">
          <img src="images/index-hero.png" alt="Refined Urban Classic" />
          <div class="slide-text">
            <h3>Refined Urban Classic</h3>
            <p>Tailored cabinetry with timeless appeal.</p>
          </div>
        </article>
        <article class="carousel-slide">
          <img src="images/index-hero.png" alt="Light-Filled Family Hub" />
          <div class="slide-text">
            <h3>Light-Filled Family Hub</h3>
            <p>An inviting space for everyday living.</p>
          </div>
        </article>
        <article class="carousel-slide">
          <img src="images/index-hero.png" alt="Tailored Heritage Revival" />
          <div class="slide-text">
            <h3>Tailored Heritage Revival</h3>
            <p>Classic forms with modern functionality.</p>
          </div>
        </article>
      </div>
      <div class="carousel-controls">
        <a href="/portfolio.html" class="btn btn--primary">View Portfolio</a>
      </div>
    </div>
  </section>
  <div id="footer-placeholder"></div>
  <script>
    function loadPartial(url, placeholderId) {
      fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const fragment = document.createDocumentFragment();
          doc.body.childNodes.forEach(node => fragment.appendChild(node.cloneNode(true)));
          const placeholder = document.getElementById(placeholderId);
          placeholder.replaceWith(fragment);

          // Include any stylesheets from the partial's <head>
          doc.head
            .querySelectorAll('link[rel="stylesheet"], style')
            .forEach(el => {
              const clone = el.cloneNode(true);
              if (el.tagName.toLowerCase() === 'link') {
                const exists = Array.from(document.head.querySelectorAll('link'))
                  .some(l => l.href === clone.href);
                if (!exists) document.head.appendChild(clone);
              } else {
                document.head.appendChild(clone);
              }
            });

          // Re-execute any inline or external scripts
          doc.querySelectorAll('script').forEach(src => {
            const s = document.createElement('script');
            if (src.src) { s.src = src.src; } else { s.textContent = src.textContent; }
            document.body.appendChild(s);
          });
        })
        .catch(err => console.error('Failed to load', url, err));
    }
    loadPartial('header/header.html', 'header-placeholder');
    loadPartial('footer/footer.html', 'footer-placeholder');

    const track = document.querySelector('[data-js="signature-track"]');
    if (track) {
      const slide = track.querySelector('.carousel-slide');
      const gap = parseFloat(getComputedStyle(track).gap) || 0;
      const slideWidth = () => slide.clientWidth + gap;
      function scrollByAmount(amount) {
        const max = track.scrollWidth - track.clientWidth;
        const dest = Math.min(Math.max(track.scrollLeft + amount, 0), max);
        track.scrollTo({ left: dest, behavior: 'smooth' });
      }
      let startX = 0;
      track.addEventListener('touchstart', e => {
        startX = e.touches[0].clientX;
      }, { passive: true });
      track.addEventListener('touchend', e => {
        const delta = startX - e.changedTouches[0].clientX;
        if (delta > 50) scrollByAmount(slideWidth());
        if (delta < -50) scrollByAmount(-slideWidth());
      }, { passive: true });
    }
  </script>
</body>
</html>
